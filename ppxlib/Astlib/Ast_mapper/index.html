<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ast_mapper (ppxlib.Astlib.Ast_mapper)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">ppxlib</a> &#x00BB; <a href="../index.html">Astlib</a> &#x00BB; Ast_mapper</nav><h1>Module <code>Astlib.Ast_mapper</code></h1></header><dl><dt class="spec value" id="val-add_ppx_context_str"><a href="#val-add_ppx_context_str" class="anchor"></a><code><span class="keyword">val</span> add_ppx_context_str : <span>tool_name:string</span> <span>&#45;&gt;</span> <span>Parsetree.structure_item list</span> <span>&#45;&gt;</span> <span>Parsetree.structure_item list</span></code></dt><dd><p>Extract information from the current environment and encode it into an attribute which is prepended to the list of structure items in order to pass the information to an external processor.</p></dd></dl><dl><dt class="spec value" id="val-drop_ppx_context_str"><a href="#val-drop_ppx_context_str" class="anchor"></a><code><span class="keyword">val</span> drop_ppx_context_str : <span>restore:bool</span> <span>&#45;&gt;</span> <span>Parsetree.structure_item list</span> <span>&#45;&gt;</span> <span>Parsetree.structure_item list</span></code></dt><dd><p>Drop the ocaml.ppx.context attribute from a structure. If <code>restore</code> is true, also restore the associated data in the current process.</p></dd></dl><dl><dt class="spec value" id="val-add_ppx_context_sig"><a href="#val-add_ppx_context_sig" class="anchor"></a><code><span class="keyword">val</span> add_ppx_context_sig : <span>tool_name:string</span> <span>&#45;&gt;</span> <span>Parsetree.signature_item list</span> <span>&#45;&gt;</span> <span>Parsetree.signature_item list</span></code></dt><dd><p>Same as <code>add_ppx_context_str</code>, but for signatures.</p></dd></dl><dl><dt class="spec value" id="val-drop_ppx_context_sig"><a href="#val-drop_ppx_context_sig" class="anchor"></a><code><span class="keyword">val</span> drop_ppx_context_sig : <span>restore:bool</span> <span>&#45;&gt;</span> <span>Parsetree.signature_item list</span> <span>&#45;&gt;</span> <span>Parsetree.signature_item list</span></code></dt><dd><p>Same as <code>drop_ppx_context_str</code>, but for signatures.</p></dd></dl><dl><dt class="spec value" id="val-set_cookie"><a href="#val-set_cookie" class="anchor"></a><code><span class="keyword">val</span> set_cookie : string <span>&#45;&gt;</span> Parsetree.expression <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-get_cookie"><a href="#val-get_cookie" class="anchor"></a><code><span class="keyword">val</span> get_cookie : string <span>&#45;&gt;</span> <span>Parsetree.expression option</span></code></dt><dt class="spec value" id="val-tool_name"><a href="#val-tool_name" class="anchor"></a><code><span class="keyword">val</span> tool_name : unit <span>&#45;&gt;</span> string</code></dt><dd><p>Can be used within a ppx preprocessor to know which tool is calling it <code>&quot;ocamlc&quot;</code>, <code>&quot;ocamlopt&quot;</code>, <code>&quot;ocamldoc&quot;</code>, <code>&quot;ocamldep&quot;</code>, <code>&quot;ocaml&quot;</code>, ... Some global variables that reflect command-line options are automatically synchronized between the calling tool and the ppx preprocessor: <span class="xref-unresolved" title="unresolved reference to &quot;Clflags.include_dirs&quot;"><code>Clflags</code>.include_dirs</span>, <code>Load_path</code>, <span class="xref-unresolved" title="unresolved reference to &quot;Clflags.open_modules&quot;"><code>Clflags</code>.open_modules</span>, <span class="xref-unresolved" title="unresolved reference to &quot;Clflags.for_package&quot;"><code>Clflags</code>.for_package</span>, <span class="xref-unresolved" title="unresolved reference to &quot;Clflags.debug&quot;"><code>Clflags</code>.debug</span>.</p></dd></dl></div></body></html>