<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ppxlib__Common (ppxlib.Ppxlib__Common)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">ppxlib</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Ppxlib__Common</span></h1></header><div class="spec val" id="val-lident"><a href="#val-lident" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>lident : <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib/Longident/index.html#type-t">Ppxlib.Longident.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-core_type_of_type_declaration"><a href="#val-core_type_of_type_declaration" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>core_type_of_type_declaration : <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a></code></div><div class="doc"></div></div><div class="spec val" id="val-name_type_params_in_td"><a href="#val-name_type_params_in_td" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>name_type_params_in_td : <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a></code></div><div class="doc"></div></div><div class="spec val" id="val-combinator_type_of_type_declaration"><a href="#val-combinator_type_of_type_declaration" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>combinator_type_of_type_declaration : <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <span class="keyword">&#8209;&gt;</span> f:(loc:<a href="../Ppxlib/Location/index.html#type-t">Ppxlib.Location.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a>) <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a></code></div><div class="doc"></div></div><div class="spec val" id="val-gen_symbol"><a href="#val-gen_symbol" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>gen_symbol : ?&#8288;prefix:<a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.unit <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string</code></div><div class="doc"><p><code class="code">gen_symbol ?prefix ()</code> generates a fresh variable name with <code class="code">prefix</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">prefix</span>: default = &quot;_x&quot;</li></ul></div></div><div class="spec val" id="val-string_of_core_type"><a href="#val-string_of_core_type" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_core_type : <a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string</code></div><div class="doc"></div></div><div class="spec val" id="val-assert_no_attributes"><a href="#val-assert_no_attributes" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>assert_no_attributes : <a href="../Ppxlib__/Import/index.html#type-attributes">Ppxlib__.Import.attributes</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.unit</code></div><div class="doc"></div></div><div class="spec val" id="val-assert_no_attributes_in"><a href="#val-assert_no_attributes_in" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>assert_no_attributes_in : <a href="../Ppxlib/Ast_traverse/class-iter/index.html">Ppxlib.Ast_traverse.iter</a></code></div><div class="doc"></div></div><div class="spec val" id="val-get_type_param_name"><a href="#val-get_type_param_name" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_type_param_name : (<a href="../Ppxlib__/Import/index.html#type-core_type">Ppxlib__.Import.core_type</a><span class="keyword"> * </span><a href="../Ppxlib__/Import/index.html#type-variance">Ppxlib__.Import.variance</a>) <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string <a href="../Ppxlib/Loc/index.html#type-t">Ppxlib.Loc.t</a></code></div><div class="doc"><p><code class="code">get_tparam_id tp</code></p><ul class="at-tag"><li><span class="at-tag return">Returns</span> the string identifier associated with <code class="code">tp</code> if it is a type
parameter.</li></ul></div></div><div class="spec class" id="class-type_is_recursive"><a href="#class-type_is_recursive" class="anchor"></a><div class="def class"><code><span class="keyword">class </span><a href="class-type_is_recursive/index.html">type_is_recursive</a> : <a href="../Ppxlib__/Import/index.html#type-rec_flag">Ppxlib__.Import.rec_flag</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.list <span class="keyword">&#8209;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></div><div class="doc"><p><code class="code">(new type_is_recursive rec_flag tds)#go ()</code> returns whether <code class="code">rec_flag, tds</code> is really
a recursive type. We disregard recursive occurrences appearing in arrow types. You can
override the search for certain type expressions by inheriting from this class.</p></div></div><div class="spec val" id="val-really_recursive"><a href="#val-really_recursive" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>really_recursive : <a href="../Ppxlib__/Import/index.html#type-rec_flag">Ppxlib__.Import.rec_flag</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.list <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-rec_flag">Ppxlib__.Import.rec_flag</a></code></div><div class="doc"><p><code class="code">really_recursive rec_flag tds = (new type_is_recursive rec_flag tds)#go ()</code></p></div></div><div class="spec val" id="val-loc_of_payload"><a href="#val-loc_of_payload" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>loc_of_payload : <a href="../Ppxlib__/Import/index.html#type-attribute">Ppxlib__.Import.attribute</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib/Location/index.html#type-t">Ppxlib.Location.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-loc_of_attribute"><a href="#val-loc_of_attribute" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>loc_of_attribute : <a href="../Ppxlib__/Import/index.html#type-attribute">Ppxlib__.Import.attribute</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib/Location/index.html#type-t">Ppxlib.Location.t</a></code></div><div class="doc"></div></div><div class="spec val" id="val-curry_applications"><a href="#val-curry_applications" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>curry_applications : <a href="../Ppxlib__/Import/index.html#type-expression">Ppxlib__.Import.expression</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-expression">Ppxlib__.Import.expression</a></code></div><div class="doc"><p>convert multi-arg function applications into a cascade of 1-arg applications</p></div></div><div class="spec val" id="val-attribute_of_warning"><a href="#val-attribute_of_warning" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>attribute_of_warning : <a href="../Ppxlib/Location/index.html#type-t">Ppxlib.Location.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-attribute">Ppxlib__.Import.attribute</a></code></div><div class="doc"><p>Encode a warning message into an 'ocaml.ppwarning' attribute which can be inserted in
a generated Parsetree. The compiler will be responsible for reporting the warning.</p></div></div><div class="spec val" id="val-is_polymorphic_variant"><a href="#val-is_polymorphic_variant" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_polymorphic_variant : <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <span class="keyword">&#8209;&gt;</span> sig_:<a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.bool <span class="keyword">&#8209;&gt;</span> [&gt; `Definitely | `Maybe | `Surely_not ]</code></div><div class="doc"></div></div><div class="spec val" id="val-mk_named_sig"><a href="#val-mk_named_sig" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mk_named_sig : loc:<a href="../Ppxlib/Location/index.html#type-t">Ppxlib.Location.t</a> <span class="keyword">&#8209;&gt;</span> sg_name:<a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.string <span class="keyword">&#8209;&gt;</span> handle_polymorphic_variant:<a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.bool <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-type_declaration">Ppxlib__.Import.type_declaration</a> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.list <span class="keyword">&#8209;&gt;</span> <a href="../Ppxlib__/Import/index.html#type-include_description">Ppxlib__.Import.include_description</a> <a href="../Ppxlib__/index.html#module-Import">Ppxlib__.Import</a>.option</code></div><div class="doc"><p><code class="code">mk_named_sig ~loc ~sg_name:&quot;Foo&quot; ~handle_polymorphic_variant tds</code> will
generate
</p><pre><code class="code">      include Foo (* or Foo1, Foo2, Foo3 *)
        with type (* ('a, 'b, 'c) *) t := (* ('a, 'b, 'c) *) t</code></pre><p>
when:
</p><ul><li>there is only one type declaration</li><li>the type is named t</li><li>there are less than 4 type parameters</li><li>there are no constraints on the type parameters</li></ul><p>It will take care of giving fresh names to unnamed type parameters.</p></div></div></body></html>